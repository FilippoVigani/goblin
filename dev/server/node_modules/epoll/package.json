{
  "_args": [
    [
      {
        "raw": "epoll@^2.0.3",
        "scope": null,
        "escapedName": "epoll",
        "name": "epoll",
        "rawSpec": "^2.0.3",
        "spec": ">=2.0.3 <3.0.0",
        "type": "range"
      },
      "C:\\Users\\filippo\\Documents\\Projects\\goblin\\dev\\server\\node_modules\\rpi-gpio"
    ]
  ],
  "_from": "epoll@^2.0.3",
  "_hasShrinkwrap": false,
  "_id": "epoll@2.0.7",
  "_location": "/epoll",
  "_nodeVersion": "8.10.0",
  "_npmOperationalInternal": {
    "host": "s3://npm-registry-packages",
    "tmp": "tmp/epoll_2.0.7_1545212001747_0.3280098712119328"
  },
  "_npmUser": {
    "name": "fivdi",
    "email": "bdscooke@gmail.com"
  },
  "_npmVersion": "5.6.0",
  "_phantomChildren": {},
  "_requested": {
    "raw": "epoll@^2.0.3",
    "scope": null,
    "escapedName": "epoll",
    "name": "epoll",
    "rawSpec": "^2.0.3",
    "spec": ">=2.0.3 <3.0.0",
    "type": "range"
  },
  "_requiredBy": [
    "/rpi-gpio"
  ],
  "_resolved": "https://registry.npmjs.org/epoll/-/epoll-2.0.7.tgz",
  "_shasum": "7eb126fac722eab83c3ac486fa8ef46d6a238290",
  "_shrinkwrap": null,
  "_spec": "epoll@^2.0.3",
  "_where": "C:\\Users\\filippo\\Documents\\Projects\\goblin\\dev\\server\\node_modules\\rpi-gpio",
  "author": {
    "name": "fivdi"
  },
  "bugs": {
    "url": "https://github.com/fivdi/epoll/issues"
  },
  "dependencies": {
    "bindings": "^1.3.1",
    "nan": "^2.12.1"
  },
  "description": "A low-level Node.js binding for the Linux epoll API",
  "devDependencies": {},
  "directories": {
    "example": "example",
    "test": "test"
  },
  "dist": {
    "integrity": "sha512-oCj9Prru+JVvxXAuYjcJqp9a5aefj5ZLKyTQ01AKniYls7dAoEDRxsAC7J2CP7pZ5sXbY/qBeToZmVT+L/CYNg==",
    "shasum": "7eb126fac722eab83c3ac486fa8ef46d6a238290",
    "tarball": "https://registry.npmjs.org/epoll/-/epoll-2.0.7.tgz",
    "fileCount": 30,
    "unpackedSize": 40132,
    "npm-signature": "-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v3.0.4\r\nComment: https://openpgpjs.org\r\n\r\nwsFcBAEBCAAQBQJcGhBiCRA9TVsSAnZWagAAIVUP/jLCk+W4hFq59eUR91na\nXMKd3xCreRXBNnj9v4CeFj3+p80awZ/EZVJ4lEF2CJR1/vhfk8gIemkOhjiV\n0rkzr7KfhuXLyYbRAcO1vcE9hUtbVxZPKIojeLO+jCsv9DMweZcsUI4Wz/gJ\nqbQKvsQ2BNv6vgTe2kbJ8uCfhb8ZmFYCXuCZnEtFJKvwax5sr6Jsy9xJ7Jlk\nVZeoQFgLyz+TstRFGjdDKDw47Zp8h7EO+9YmmPH4uJx1oCHzj3jIp+nxES/w\nOjCU1brvW4kF8Gb6KlVneD1zRMYU6IGg6BbzSqdwBU0KpWhdoXJAkgy+JSeF\nu60NaaSGAMRa7dM9PvLSj8GUHEyfrkjux6AwIhyLkP/Yg3pGLTmxSF+hTBjR\ngOVto2R76Khg6OTWG0aVljKOGtK0r2OQj+xBfEfL6MvA8YpOfce8h2CUY6iH\npwPbhs6j5itwTpLcw14+QEIIOvUz3hqOf5MMbG/GeYH6N7BaQx0njOM1ATMs\n/Eqzaj8y4pRTqrjHI+QpGF+dBztxTjrIb6OZ/+D+FDHla29+I110uxnJB6Lm\n3ZXO5O14phlTTf1odSVcdRN70RVm9q0X1INAg7Gc0PKkVfbaQWYG/XCdKe+C\nfN7aAk0a4nAQoglse+/dHbR+PEo25T0O5lw2gaNjzLs56ZZ7ENyH0XXrcLFr\nlVP4\r\n=Vh1v\r\n-----END PGP SIGNATURE-----\r\n"
  },
  "engines": {
    "node": ">=4.0.0"
  },
  "gitHead": "01c586aa82255103c02b6c4f00456528fc1342d5",
  "gypfile": true,
  "homepage": "https://github.com/fivdi/epoll#readme",
  "keywords": [
    "epoll",
    "epollpri",
    "poll",
    "pollpri",
    "gpio",
    "interrupt",
    "linux"
  ],
  "license": "MIT",
  "main": "epoll.js",
  "maintainers": [
    {
      "name": "fivdi",
      "email": "fivdiweb@gmail.com"
    }
  ],
  "name": "epoll",
  "optionalDependencies": {},
  "readme": "# epoll\n\nA low-level **Node.js** binding for the Linux epoll API for monitoring multiple\nfile descriptors to see if I/O is possible on any of them.\n\nThis module was initially written to detect EPOLLPRI events indicating that\nurgent data is available for reading. EPOLLPRI events are triggered by\ninterrupt generating [GPIO](https://www.kernel.org/doc/Documentation/gpio/)\npins. The epoll module is used by [onoff](https://github.com/fivdi/onoff)\nto detect such interrupts.\n\nepoll supports Node.js versions 4, 6, 8 and 10.\n\n## Installation\n\nNote that epoll can only be installed successfully on Linux systems. Attempting\nto install epoll on other systems will result in compile errors.\n\n```\nnpm install epoll\n```\n\n## API\n\n  * Epoll(callback) - Constructor. The callback is called when epoll events\n    occur and it gets three arguments (err, fd, events).\n  * add(fd, events) - Register file descriptor fd for the event types specified\n    by events.\n  * remove(fd) - Deregister file descriptor fd.\n  * modify(fd, events) - Change the event types associated with file descriptor\n    fd to those specified by events.\n  * close() - Deregisters all file descriptors and free resources.\n\nEvent Types\n\n  * Epoll.EPOLLIN\n  * Epoll.EPOLLOUT\n  * Epoll.EPOLLRDHUP\n  * Epoll.EPOLLPRI\n  * Epoll.EPOLLERR\n  * Epoll.EPOLLHUP\n  * Epoll.EPOLLET\n  * Epoll.EPOLLONESHOT\n\nEvent types can be combined with | when calling add or modify. For example,\nEpoll.EPOLLPRI | Epoll.EPOLLONESHOT could be passed to add to detect a single\nGPIO interrupt.\n\n## Example - Watching Buttons\n\nThe following example shows how epoll can be used to detect interrupts from a\nmomentary push-button connected to GPIO #4 (pin P1-7) on the Raspberry Pi.\nThe source code is available in the\n[example directory](https://github.com/fivdi/epoll/tree/master/example/watch-button)\nand can easily be modified for using a different GPIO on the Pi or a different\nplatform such as the BeagleBone.\n\nThe first step is to export GPIO #4 as an interrupt generating input using\nthe export bash script from the examples directory.\n\n```\n./export\n```\n\nexport:\n\n```bash\n#!/bin/sh\necho 4 > /sys/class/gpio/export\nsleep 1\necho in > /sys/class/gpio/gpio4/direction\necho both > /sys/class/gpio/gpio4/edge\n```\n\nThen run watch-button to be notified every time the button is pressed and\nreleased. If there is no hardware debounce circuit for the push-button, contact\nbounce issues are very likely to be visible on the console output.\nwatch-button terminates automatically after 30 seconds.\n\n```\nnode watch-button\n```\n\nwatch-button:\n\n```js\nconst Epoll = require('epoll').Epoll;\nconst fs = require('fs');\n\nconst valuefd = fs.openSync('/sys/class/gpio/gpio4/value', 'r');\nconst buffer = Buffer.alloc(1);\n\n// Create a new Epoll. The callback is the interrupt handler.\nconst poller = new Epoll((err, fd, events) => {\n  // Read GPIO value file. Reading also clears the interrupt.\n  fs.readSync(fd, buffer, 0, 1, 0);\n  console.log(buffer.toString() === '1' ? 'pressed' : 'released');\n});\n\n// Read the GPIO value file before watching to\n// prevent an initial unauthentic interrupt.\nfs.readSync(valuefd, buffer, 0, 1, 0);\n\n// Start watching for interrupts.\npoller.add(valuefd, Epoll.EPOLLPRI);\n\n// Stop watching after 30 seconds.\nsetTimeout(() => {\n  poller.remove(valuefd).close();\n}, 30000);\n```\n\nWhen watch-button has terminated, GPIO #4 can be unexported using the\nunexport bash script.\n\n```\n./unexport\n```\n\nunexport:\n\n```bash\n#!/bin/sh\necho 4 > /sys/class/gpio/unexport\n```\n\n## Example - Interrupts Per Second\n\nThe following example shows how epoll can be used to determine the number of\nhardware interrupts that can be handled per second on the Raspberry Pi.\nThe source code is available in the\n[example directory](https://github.com/fivdi/epoll/tree/master/example/interrupts-per-second)\nand can easily be modified to use different GPIOs on the Raspberry Pi or a\ndifferent platform such as the BeagleBone.\n\nIn this example, GPIO #7 is wired to one end of a 1kâ„¦ current limiting\nresistor and GPIO #8 is wired to the other end of the resistor. GPIO #7 is an\ninput and GPIO #8 is an output.\n\nThe first step is to export GPIOs #7 and #8 using the export bash script from\nthe examples directory.\n\n```\n./export\n```\n\nexport:\n\n```bash\n#!/bin/sh\necho 7 > /sys/class/gpio/export\necho 8 > /sys/class/gpio/export\nsleep 1\necho in > /sys/class/gpio/gpio7/direction\necho both > /sys/class/gpio/gpio7/edge\necho out > /sys/class/gpio/gpio8/direction\n```\n\nThen run interrupts-per-second. interrupts-per-second toggles the state of the\noutput every time it detects an interrupt on the input. Each toggle will\ntrigger the next interrupt. After five seconds, interrupts-per-second prints\nthe number of interrupts it detected per second.\n\n```\nnode interrupts-per-second\n```\n\ninterrupts-per-second:\n\n```js\nconst Epoll = require('../../').Epoll;\nconst fs = require('fs');\n\nconst value = Buffer.alloc(1); // The three Buffers here are global\nconst zero = Buffer.from('0'); // to improve performance.\nconst one = Buffer.from('1');\n\nconst inputfd = fs.openSync('/sys/class/gpio/gpio7/value', 'r+');\nconst outputfd = fs.openSync('/sys/class/gpio/gpio8/value', 'r+');\n\nlet count = 0;\n\n// Create a new Epoll. The callback is the interrupt handler.\nconst poller = new Epoll((err, fd, events) => {\n  count += 1;\n\n  // Read GPIO value file. Reading also clears the interrupt.\n  fs.readSync(inputfd, value, 0, 1, 0);\n\n  // Toggle GPIO value. This will eventually result\n  // in the next interrupt being triggered.\n  const nextValue = value[0] === zero[0] ? one : zero;\n  fs.writeSync(outputfd, nextValue, 0, nextValue.length, 0);\n});\n\nlet time = process.hrtime(); // Get start time.\n\n// Start watching for interrupts. This will trigger the first interrupt\n// as the value file already has data waiting for a read.\npoller.add(inputfd, Epoll.EPOLLPRI);\n\n// Print interrupt rate to console after 5 seconds.\nsetTimeout(() => {\n  time = process.hrtime(time); // Get run time.\n  const rate = Math.floor(count / (time[0] + time[1] / 1E9));\n  console.log(rate + ' interrupts per second');\n\n  // Stop watching.\n  poller.remove(inputfd).close();\n}, 5000);\n```\n\nWhen interrupts-per-second has terminated, GPIOs #7 and #8 can be unexported\nusing the unexport bash script.\n\n```\n./unexport\n```\n\nunexport:\n\n```bash\n#!/bin/sh\necho 7 > /sys/class/gpio/unexport\necho 8 > /sys/class/gpio/unexport\n```\n\nHere are some results from the \"Interrupts Per Second\" example.\n\n**Raspberry Pi 3, 1.2Ghz, Raspbian:**\n\nnode | epoll | kernel | interrupts / sec\n:---: | :---: | :---: | ---:\nv10.7.0 | v2.0.2 | 4.14.50-v7+ | 22468\nv8.11.3 | v2.0.2 | 4.14.50-v7+ | 21022\nv6.14.3 | v2.0.2 | 4.14.50-v7+ | 22745\nv4.9.1 | v2.0.2 | 4.14.50-v7+ | 21693\n\n",
  "readmeFilename": "README.md",
  "repository": {
    "type": "git",
    "url": "git+https://github.com/fivdi/epoll.git"
  },
  "scripts": {
    "install": "node-gyp rebuild",
    "test": "echo \"Tests can only be run manually from the command line.\" && exit 1"
  },
  "version": "2.0.7"
}
